{
  "version": 8,
  "sources": {
    "watercolor": {
      "type": "raster",
      "tiles": [
        "http://tile.stamen.com/watercolor/{z}/{x}/{y}.png"
      ],
      "tileSize": 256
    },
    "topographic": {
      "type": "raster",
      "tiles": [
        "http://server.arcgisonline.com/ArcGIS/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}"
      ],
      "tileSize": 256
    },
    "area-labels": {
      "type": "geojson",
      "data": {
        "type": "FeatureCollection",
        "features": [ ]
      }
    },
    "area-outlines": {
      "type": "geojson",
      "data": {
        "type": "FeatureCollection",
        "features": [ ]
      }
    },
    "provinces": {
      "type": "geojson",
      "data": {
        "type": "FeatureCollection",
        "features": [ ]
      }
    },
    "area-hover": {
      "type": "geojson",
      "data": {
        "type": "FeatureCollection",
        "features": [ ]
      }
    },
    "area-mod": {
      "type": "geojson",
      "data": {
        "type": "FeatureCollection",
        "features": [ ]
      }
    },
    "markers": {
      "cluster": true,
      "clusterMaxZoom": 14,
      "clusterRadius": 50,
      "type": "geojson",
      "data": {
        "type": "FeatureCollection",
        "features": [{
          "properties": {
            "yearOfOcc": "1812",
            "name": "Battle of Queenston Heights",
            "wikiUrl": "Battle%20of%20Queenston%20Heights",
            "age": -171,
            "_storage_options": {
              "iconClass": "Drop",
              "iconUrl": "/static/i/b0.png"
            }
          },
          "geometry": {
            "coordinates": [
              -79.05049,
              43.16192
            ],
            "type": "Point"
          },
          "type": "Feature"
        },
          {
            "properties": {
              "yearOfOcc": "1642",
              "name": "Battle of Lerida (1642)",
              "wikiUrl": "Battle%20of%20Lerida%20%281642%29",
              "age": -1,
              "_storage_options": {
                "iconClass": "Drop",
                "iconUrl": "/static/i/b0.png"
              }
            },
            "geometry": {
              "coordinates": [
                0.63333333,
                41.61666667
              ],
              "type": "Point"
            },
            "type": "Feature"
          },
          {
            "properties": {
              "yearOfOcc": "1690",
              "name": "Battle of Cromdale",
              "wikiUrl": "Battle%20of%20Cromdale",
              "age": -49,
              "_storage_options": {
                "iconClass": "Drop",
                "iconUrl": "/static/i/b0.png"
              }
            },
            "geometry": {
              "coordinates": [
                -3.48916667,
                57.33166667
              ],
              "type": "Point"
            },
            "type": "Feature"
          },
          {
            "properties": {
              "yearOfOcc": "1634",
              "name": "Battle of NÃ¶rdlingen (1634)",
              "wikiUrl": "Battle%20of%20NÃ¶rdlingen%20%281634%29",
              "age": 7,
              "_storage_options": {
                "iconClass": "Drop",
                "iconUrl": "/static/i/b2.png"
              }
            },
            "geometry": {
              "coordinates": [
                10.492802,
                48.805026
              ],
              "type": "Point"
            },
            "type": "Feature"
          },
          {
            "properties": {
              "yearOfOcc": "1644",
              "name": "Battle of Marston Moor",
              "wikiUrl": "Battle%20of%20Marston%20Moor",
              "age": -3,
              "_storage_options": {
                "iconClass": "Drop",
                "iconUrl": "/static/i/b0.png"
              }
            },
            "geometry": {
              "coordinates": [
                -1.2619,
                53.9637
              ],
              "type": "Point"
            },
            "type": "Feature"
          }]
      }
    }
  },
  "transition": {
    "duration": 0,
    "delay": 0
  },
  "glyphs": "fonts/{fontstack}/{range}.pbf",
  "layers": [
    {
      "id": "basemap",
      "type": "raster",
      "source": "watercolor",
      "paint": {
        "raster-saturation": 0
      }
    },
    {
      "id": "provinces",
      "type": "fill",
      "minzoom": 5,
      "source": "provinces",
      "paint": {
        "fill-color": {
          "property": "color",
          "type": "identity",
          "default": "rgba(0,0,0,.2)"
        },
        "fill-opacity": 0.3,
        "fill-outline-color": "rgba(0,0,0,1)"
      },
      "interactive": true
    },
    {
      "id": "ruler",
      "type": "fill",
      "maxzoom": 5,
      "source": "provinces",
      "layout": {
        "visibility": "none"
      },
      "paint": {},
      "interactive": true
    },
    {
      "id": "religion",
      "type": "fill",
      "maxzoom": 5,
      "source": "provinces",
      "layout": {
        "visibility": "none"
      },
      "interactive": true,
      "paint": {}
    },
    {
      "id": "religionGeneral",
      "type": "fill",
      "maxzoom": 5,
      "source": "provinces",
      "layout": {
        "visibility": "none"
      },
      "interactive": true,
      "paint": {}
    },
    {
      "id": "culture",
      "type": "fill",
      "maxzoom": 5,
      "source": "provinces",
      "layout": {
        "visibility": "none"
      },
      "interactive": true,
      "paint": {}
    },
    {
      "id": "population",
      "type": "fill",
      "maxzoom": 5,
      "source": "provinces",
      "layout": {
        "visibility": "none"
      },
      "interactive": true,
      "paint": {}
    },
    {
      "id": "area-outlines",
      "type": "line",
      "source": "area-outlines",
      "layout": {
        "line-join": "round",
        "line-cap": "round"
      },
      "paint": {
        "line-color": "#888",
        "line-width": 8
      }
    },
    {
      "id": "area-hover",
      "type": "fill",
      "source": "area-hover",
      "paint": {
        "fill-opacity": 0.2
      }
    },
    {
      "id": "area-mod",
      "type": "fill",
      "source": "area-mod",
      "paint": {
        "fill-opacity": 0.5,
        "fill-outline-color": "red"
      }
    },
    {
      "id": "area-labels",
      "type": "symbol",
      "source": "area-outlines",
      "layout": {
        "symbol-spacing": 1000,
        "icon-allow-overlap": false,
        "text-field": "{n}",
        "text-font": ["Cinzel Regular"],
        "text-transform": "uppercase",
        "text-size":
        {
          "type": "exponential",
          "stops": [
            [{"zoom": 0, "value": 100}, 0],
            [{"zoom": 0, "value": 5000}, 5],
            [{"zoom": 20, "value": 100}, 50],
            [{"zoom": 20, "value": 5000}, 500]

          ], "property": "d",
          "default": 50
        }
      },
      "paint": {
        "text-color": "#333",
        "text-halo-width": 1,
        "text-halo-blur": 1,
        "text-halo-color": "#FFFBE5"
      }
    },
    {
      "id": "clusters",
      "type": "circle",
      "source": "markers",
      "filter": ["has", "point_count"],
      "paint": {
        "circle-color": {
          "property": "point_count",
          "type": "interval",
          "stops": [
            [0, "#51bbd6"],
            [10, "#f1f075"],
            [30, "#f28cb1"]
          ]
        },
        "circle-radius": {
          "property": "point_count",
          "type": "interval",
          "stops": [
            [0, 20],
            [100, 30],
            [750, 40]
          ]
        }
      }
    },
    {
      "id": "cluster-count",
      "type": "symbol",
      "source": "markers",
      "filter": ["has", "point_count"],
      "layout": {
        "text-field": "{point_count_abbreviated}",
        "text-font": ["Cinzel Bold"],
        "text-size": 12
      }
    },
    {
      "id": "markers",
      "type": "circle",
      "source": "markers",
      "filter": ["!has", "point_count"],
      "paint": {
        "circle-color": "#11b4da",
        "circle-radius": 4,
        "circle-stroke-width": 1,
        "circle-stroke-color": "#fff"
      }
    }
  ]
}
